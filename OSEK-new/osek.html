<!DOCTYPE html>
<html lang="en">
<head>
    <title>OSEK</title>
    <link rel="stylesheet" type="text/css" href="poster,style=bubble">
   <style>
.yellow
{
border-color: #7c7c00;
background-color: #f0f0b4;
}
.blue
{
border-color: #00007c;
background-color: #b4b4f0;
}
.green
{
border-color: #003e00;
background-color: #b4f0b4;
}
.black
{
border-color: #000000;
background-color: #f0f0f0;
}
.orange
{
border-color: #7c5000;
background-color: #f0dbb4;
}
.cyan
{
border-color: #007c7c;
background-color: #b4f0f0;
}
.red
{
border-color: #7c0000;
background-color: #f0b4b4;
}

   </style>    <meta charset="utf-8" />
<script type="text/javascript" 
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</head>
<body>
<h1>OSEK </h1> 
<div> <br /> </div>
<div>MODULE <span class="large">OSEK-SYNTAX</span> <br /> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> AExp </span></td><td> ::= </td> <td><span class ="italic"> Int </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Id </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> AExp </span>/ <span class ="italic"> AExp </span> [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> AExp </span>+ <span class ="italic"> AExp </span> [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> AExp </span>- <span class ="italic"> AExp </span> [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> AExp </span>* <span class ="italic"> AExp </span> [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> AExp </span>% <span class ="italic"> AExp </span> [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>( <span class ="italic"> AExp </span>)  [ <span class ="attribute"> bracket</span> ]</td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> BExp </span></td><td> ::= </td> <td><span class ="italic"> Bool </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>\(\)<span class ="italic"> AExp </span>\(\leq\)<span class ="italic"> AExp </span>\(\) [ <span class ="attribute"> seqstrict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>! <span class ="italic"> BExp </span> [ <span class ="attribute"> strict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>\(\)<span class ="italic"> AExp </span>\(\leq\)<span class ="italic"> AExp </span>\(\) [ <span class ="attribute"> seqstrict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> AExp </span>== <span class ="italic"> AExp </span> [ <span class ="attribute"> seqstrict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> AExp </span>!= <span class ="italic"> AExp </span> [ <span class ="attribute"> seqstrict</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> BExp </span>&& <span class ="italic"> BExp </span> [ <span class ="attribute"> strict(1)</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>( <span class ="italic"> BExp </span>)  [ <span class ="attribute"> bracket</span> ]</td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> ListId </span></td><td> ::= </td> <td><span class ="italic">List</span>{#<span class ="italic">Id</span>,"|"} </span>
</td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> A&Pi;Stmt </span></td><td> ::= </td> <td>ActivateTask ( <span class ="italic"> Id </span>) ; </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>ChainTask ( <span class ="italic"> Id </span>) ; </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>TerminateTask ( ) ; </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>SetRelAlarm ( <span class ="italic"> Id </span>, <span class ="italic"> Int </span>, <span class ="italic"> Int </span>) ; </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>SetAbsAlarm ( <span class ="italic"> Id </span>, <span class ="italic"> Int </span>, <span class ="italic"> Int </span>) ; </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>GetAlarm ( <span class ="italic"> Id </span>, <span class ="italic"> Int </span>) ; </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>CancelAlarm ( <span class ="italic"> Id </span>) ; </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>Schedule ( ) ; </td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> Stmt </span></td><td> ::= </td> <td><span class ="italic"> Block </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Id </span>= <span class ="italic"> AExp </span>;  [ <span class ="attribute"> strict(2)</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>int <span class ="italic"> Id </span>; </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>if ( <span class ="italic"> BExp </span>) <span class ="italic"> Block </span>else <span class ="italic"> Block </span> [ <span class ="attribute"> strict(1)</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>if ( <span class ="italic"> BExp </span>) <span class ="italic"> Block </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>while ( <span class ="italic"> BExp </span>) <span class ="italic"> Block </span></td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> Block </span></td><td> ::= </td> <td>{ } </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>{ <span class ="italic"> OSEKStmt </span>} </td> </tr>
</table>
<br />
<div class="commentBlock moduleComment tex2jax_ignore">
 The syntax of configuration of OSEK/VDX </div><div><br /></div>
<div class="commentBlock moduleComment tex2jax_ignore">
 Two possible values can be assigned to varible SchedValue. The value FULL corresponds to a preemptable task, while the value NON to a non- preemptable task.</div><div><br /></div>
<table> <tr> <td> SYNTAX <span class ="italic"> SchedValue </span></td><td> ::= </td> <td>NON </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>FULL </td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> DeclStmt </span></td><td> ::= </td> <td>TASK <span class ="italic"> Id </span>{ <span class ="italic"> TaskProStmts </span>} ; </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>ALARM <span class ="italic"> Id </span>{ <span class ="italic"> AlarmProStmts </span>} ; </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>COUNTER <span class ="italic"> Id </span>{ <span class ="italic"> CounterProStmts </span>} ; </td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> AlarmProStmt </span></td><td> ::= </td> <td>COUNTER = <span class ="italic"> Id </span>; </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>ACTION = <span class ="italic"> Action </span>; </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>AUTOSTART = false ; </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>AUTOSTART = true { <span class ="italic"> AlarmProperties </span>} ; </td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> AlarmProStmts </span></td><td> ::= </td> <td><span class ="italic">List</span>{#<span class ="italic">AlarmProStmt</span>,""} </span>
</td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> Action </span></td><td> ::= </td> <td>ACTIVATETASK { TASK = <span class ="italic"> Id </span>; } </td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> AlarmProperty </span></td><td> ::= </td> <td>ALARMTIME = <span class ="italic"> Int </span>; </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>CYCLETIME = <span class ="italic"> Int </span>; </td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> AlarmProperties </span></td><td> ::= </td> <td><span class ="italic">List</span>{#<span class ="italic">AlarmProperty</span>,""} </span>
</td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> CounterProStmt </span></td><td> ::= </td> <td>MAXALLOWEDVALUE = <span class ="italic"> Int </span>; </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>MINICYCLE = <span class ="italic"> Int </span>; </td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> CounterProStmts </span></td><td> ::= </td> <td><span class ="italic">List</span>{#<span class ="italic">CounterProStmt</span>,""} </span>
</td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> TaskProStmt </span></td><td> ::= </td> <td>PRIORITY = <span class ="italic"> Int </span>; </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>AUTOSTART = <span class ="italic"> Bool </span>; </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>SCHEDULE = <span class ="italic"> SchedValue </span>; </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>ACTIVATION = <span class ="italic"> Int </span>; </td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> TaskProStmts </span></td><td> ::= </td> <td><span class ="italic">List</span>{#<span class ="italic">TaskProStmt</span>,""} </span>
</td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> MaskType </span></td><td> ::= </td> <td>AUTO </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Int </span></td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> DefStmt </span></td><td> ::= </td> <td>TASK <span class ="italic"> Id </span>{ <span class ="italic"> OSEKStmt </span>} ; </td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> OSEKStmt </span></td><td> ::= </td> <td><span class ="italic"> DefStmt </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> DeclStmt </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Stmt </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> A&Pi;Stmt </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> OSEKStmt </span><span class ="italic"> OSEKStmt </span></td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> OSEK </span></td><td> ::= </td> <td><span class ="italic"> OSEKStmt </span></td> </tr>
</table>
<br />
END MODULE </div>
<br />
<div>MODULE <span class="large">OSEK-CONFIGURATION</span> <br /> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 <h3> TaskState </h3><br/>
  A task has to change between several states. Extended tasks have four task states. Its state model can be seen as follows.

  The state model of basic tasks is nearly identical to the extended tasks state model. The only exception is that basic tasks do not have a waiting state.</div><div><br /></div>
<table> <tr> <td> SYNTAX <span class ="italic"> TaskState </span></td><td> ::= </td> <td>running </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>suspend </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>ready </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>waiting </td> </tr>
</table>
<br />
<div class="commentBlock moduleComment tex2jax_ignore">
 <h3> Signal </h3><br/>
 Since rules in K Framework are excuted indeterminate, signal mechanism is introdued in our work. Signal mechanism ensures the system manages signals first. We define a type Signal and three constants of it. The signal schedule indicates that a task should be scheduled. The signal alarmed means the counter is expired and the alarm begins to work. When signal arrives, system deals with alarm at once.  Priority of alarmed is higher than that of schedule. When any errors occurs in the system, the stop signal is given. A case　may happen that two schedule signals arrive at the same time. (This condition is introduced in section alarm.) In fact, the tasks just need to schedule once. Thus these signals are defined as elements of a set due to mutual differences of sets. </div><div><br /></div>
<table> <tr> <td> SYNTAX <span class ="italic"> Signal </span></td><td> ::= </td> <td>schedule </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>stop </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>alarmed </td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> SysApi </span></td><td> ::= </td> <td>ActivateTask </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>TerminateTask </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>ChainTask </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>WaitEvent </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>SetEvent </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>ClearEvent </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>SetrelAlarm </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>SetabsAlarm </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>GetAlarm </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>CancelAlarm </td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> Id </span></td><td> ::= </td> <td>initialTask </td> </tr>
</table>
<br />
<div class="commentBlock moduleComment tex2jax_ignore">
 <h2> configuration </h2><br/>
      The configuration consists of four parts
      \begin{enumerate}
	<li> A set of \emph{global values} used to represent part of the state of the system 
	<li> A set of tasks. They are first initialized accorrding to the input. Each task contains a list of APIs which can be executed by the system if it is not in the TCG mode. In the TCG mode, API is randomly generated. 
	<li> A counter declared by OS system
	<li> A set of alarms declared by users or autostarted when start the system
	<li> A set of resources declared by users  
	<li> A set of events declared by users 
      \end{enumerate}

  </div><div><br /></div>
<div class="commentBlock moduleComment tex2jax_ignore">
 constant <span style="font-family: courier;">sysapis</span> represents a list of all system APIs.
    </div><div><br /></div>
<div class="commentBlock moduleComment tex2jax_ignore">
 A new type TaskPair, which used to store a task's ID (Id) and priority (Int), is defined here.</div><div><br /></div>
<table> <tr> <td> SYNTAX <span class ="italic"> TaskPair </span></td><td> ::= </td> <td>&lt; <span class ="italic"> Id </span>; <span class ="italic"> Int </span>> </td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> ListTaskPair </span></td><td> ::= </td> <td><span class ="italic">List</span>{#<span class ="italic">TaskPair</span>,""} </span>
</td> </tr>
</table>
<br />
<div> CONFIGURATION : <br /><div class="cell"> <div class="tab curvedEdge yellow"><span class = "bold">OSEK</span> </div><br /><div class="block yellow" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">global</span> </div><br /><div class="block defaultColor" style="min-width:4.2em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">proId</span> </div><br /><div class="block defaultColor" > <div class="center">&bull;</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">readyTasks</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"> <span title="ListTaskPair" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center">.Set </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">runningTask</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center">&bull;</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge black"><span class = "bold">errorCell</span> </div><br /><div class="block black" style="min-width:6.3em"> <div class="center">&bull;</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tcgMode</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="Bool">$TCG </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">types</span> </div><br /><div class="block defaultColor" > <div class="center">.Map </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block defaultColor" > <div class="center">.Map </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge orange"><span class = "bold">tasks</span> </div><br /><div class="block orange" > <div class="center"><div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><span title ="OSEK">$PGM </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">ext</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">apiData</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center">&bull;</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">&bull;</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Id"> initialTask </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tPriority</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="#Int"> 0 </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">activationTime</span> </div><br /><div class="block defaultColor" style="min-width:9.8em"> <div class="center"><span title ="#Int"> 0 </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">activatedTime</span> </div><br /><div class="block defaultColor" style="min-width:9.1em"> <div class="center"><span title ="#Int"> 0 </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">auto</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">historyK</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center">.List </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">taskAlarm</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center">&bull;</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">done</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">schedule</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center">&bull;</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tEnv</span> </div><br /><div class="block defaultColor" > <div class="center">.Map </div> </div> </div>
</div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">sysCounters</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center">&bull;</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="#Int"> 0 </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">miniCycle</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="#Int"> 0 </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><span title ="#Int"> 0 </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cAlarm</span> </div><br /><div class="block defaultColor" style="min-width:4.2em"> <div class="center">.List </div> </div> </div>
</div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarms</span> </div><br /><div class="block defaultColor" style="min-width:4.2em"> <div class="center"><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aid</span> </div><br /><div class="block defaultColor" > <div class="center">&bull;</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center">&bull;</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">RemainAlarmTime</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center">.Map </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="#Int"> 0 </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cycleTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="#Int"> 0 </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">autostart</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cyclicity</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">actionType</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">action</span> </div><br /><div class="block defaultColor" style="min-width:4.2em"> <div class="center">&bull;</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">actedId</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center">&bull;</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">actedType</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center">&bull;</div> </div> </div>
</div> </div> </div>
</div> </div> </div>
</div> </div> </div>
</div> </div> </div>
</div> <br />END MODULE </div>
<br />
<div>MODULE <span class="large">OSEK-ERROR</span> <br /> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> ErrorType </span></td><td> ::= </td> <td>E_OS_ACCESS </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>E_OS_CALLEVEL </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>E_OS_ID </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>E_OS_LIMIT </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>E_OS_NOFUNC </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>E_OS_RESOURCE </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>E_OS_STATE </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>E_OS_VALUE </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>E_OS_CONF </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>E_OS_UNDEF </td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> String </span></td><td> ::= </td> <td>Error ( <span class ="italic"> ErrorType </span>, <span class ="italic"> Id </span>, <span class ="italic"> OSEKStmt </span>, <span class ="italic"> String </span>)  [ <span class ="attribute"> function</span> ]</td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>Error ( <span class ="italic"> ErrorType </span>, <span class ="italic"> Id </span>, <span class ="italic"> String </span>)  [ <span class ="attribute"> function</span> ]</td> </tr>
</table>
<br />
END MODULE </div>
<br />
<div>MODULE <span class="large">OSEK-INITIALIZATION</span> <br /> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> Type </span></td><td> ::= </td> <td>task </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>int </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>sysCounter </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>alarm </td> </tr>
</table>
<br />
<table> <tr> <td> SYNTAX <span class ="italic"> String </span></td><td> ::= </td> <td>type2String ( <span class ="italic"> Type </span>)  [ <span class ="attribute"> function</span> ]</td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>type2String ( task ) </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="#String"> "task" </span> </em> </td> </tr> </table></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>type2String ( sysCounter ) </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="#String"> "sysCounter" </span> </em> </td> </tr> </table></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>type2String ( alarm ) </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="#String"> "alarm" </span> </em> </td> </tr> </table></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">K1 </span> in ListItem ( <span title ="K">K2 </span> ) <span title ="List">L </span> </em></td></tr> <tr class='rewriteRight'> <td><em>\(\) (<span>\(\) <span title ="K">K1 </span> \(\mathrel{=_K}\) <span title ="K">K2 </span> \(\)</span>)\(\vee_{\scriptstyle\it Bool}\) (<span><span title ="K">K1 </span> in <span title ="List">L </span> </span>)\(\)</em> </td> </tr> </table></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">K1 </span> in .List </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="#Bool"> false </span> </em> </td> </tr> </table></div> </div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> List </span></td><td> ::= </td> <td>#if <span class ="italic"> Bool </span>#then <span class ="italic"> List </span>#else <span class ="italic"> List </span>#fi  [ <span class ="attribute"> function</span> ]</td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>#if <span title ="#Bool"> true </span> #then <span title ="List">L </span> #else <span title ="K">_ </span> #fi </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="List">L </span> </em> </td> </tr> </table></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>#if <span title ="#Bool"> false </span> #then <span title ="K">_ </span> #else <span title ="List">L </span> #fi </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="List">L </span> </em> </td> </tr> </table></div> </div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 Define a function add(), which can add a TaskPair to a list or add signals to a set. 
   Note that elements in a list are in order of priority. The situation of adding two signals at once is when an ActiveTask API is called, the alarm expires exactly. Since alarmed signal and schedule signal should be added.</div><div><br /></div>
<table> <tr> <td> SYNTAX <span class ="italic"> ListTaskPair </span></td><td> ::= </td> <td>add ( <span class ="italic"> Id </span>, <span class ="italic"> Int </span>, <span class ="italic"> ListTaskPair </span>)  [ <span class ="attribute"> function</span> ]</td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>add ( <span title ="K">I </span> , <span title ="K">N </span> ,  <span title="ListTaskPair" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> ) </em></td></tr> <tr class='rewriteRight'> <td><em>(<span>&lt; <span title ="K">I </span> ; <span title ="K">N </span> >    <span title="ListTaskPair" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span>  </span>)</em> </td> </tr> </table></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>add ( <span title ="K">I </span> , <span title ="K">N </span> , (<span>&lt; <span title ="K">I' </span> ; <span title ="K">N' </span> >   <span title ="K">L </span>  </span>)) </em></td></tr> <tr class='rewriteRight'> <td><em>(<span>&lt; <span title ="K">I </span> ; <span title ="K">N </span> >   &lt; <span title ="K">I' </span> ; <span title ="K">N' </span> >   <span title ="K">L </span>   </span>)</em> </td> </tr> </table></div>  when \(\) <span title ="K">N </span> \(\mathrel{>_{\scriptstyle\it Int}}\) <span title ="K">N' </span> \(\) [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>add ( <span title ="K">I </span> , <span title ="K">N </span> , (<span>&lt; <span title ="K">I' </span> ; <span title ="K">N' </span> >   <span title ="K">L </span>  </span>)) </em></td></tr> <tr class='rewriteRight'> <td><em>(<span>&lt; <span title ="K">I' </span> ; <span title ="K">N' </span> >   add ( <span title ="K">I </span> , <span title ="K">N </span> , <span title ="K">L </span> )  </span>)</em> </td> </tr> </table></div>  when (<span>\(\) <span title ="K">N </span> \(\mathrel{\leq_{\scriptstyle\it Int}}\) <span title ="K">N' </span> \(\)</span>) [ <span class ="attribute"> structural</span> ]</div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> Set </span></td><td> ::= </td> <td>add ( <span class ="italic"> Signal </span>, <span class ="italic"> Set </span>) </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>add ( <span class ="italic"> Signal </span>, <span class ="italic"> Signal </span>, <span class ="italic"> Set </span>)  [ <span class ="attribute"> function</span> ]</td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>add ( <span title ="Signal">G </span> , <span title ="Set">S </span> ) </em></td></tr> <tr class='rewriteRight'> <td><em>(<span>SetItem ( <span title ="Signal">G </span> ) <span title ="Set">S </span> </span>)</em> </td> </tr> </table></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>add ( <span title ="Signal">G </span> , .Set ) </em></td></tr> <tr class='rewriteRight'> <td><em>(<span>SetItem ( <span title ="Signal">G </span> ) </span>)</em> </td> </tr> </table></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>add ( <span title ="Signal">G </span> , <span title ="Signal">G1 </span> , <span title ="Set">S </span> ) </em></td></tr> <tr class='rewriteRight'> <td><em>(<span>SetItem ( <span title ="Signal">G </span> ) SetItem ( <span title ="Signal">G1 </span> ) <span title ="Set">S </span> </span>)</em> </td> </tr> </table></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>add ( <span title ="Signal">G </span> , <span title ="Signal">G1 </span> , .Set ) </em></td></tr> <tr class='rewriteRight'> <td><em>(<span>SetItem ( <span title ="Signal">G </span> ) SetItem ( <span title ="Signal">G1 </span> ) </span>)</em> </td> </tr> </table></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 To process the declaration of resources. \\
      Result: A new resource is created in the configuration \\
      Condition: If Id I is not used/declared in the system, i.e., \$hasMapping(M,I) is false. If not, 
      an error occurs. 
   </div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="OSEKStmt">S1 </span> <span title ="OSEKStmt">S2 </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="OSEKStmt">S1 </span> &#x219d; <span title ="OSEKStmt">S2 </span> </em> </td> </tr> </table></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>&bull;<span title ="OSEKStmt">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="OSEKStmt">S </span> </em> </td> </tr> </table></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 The ACTION attribute defines which type of notification is used when the alarm expires. Three actions may be taken place. They are ACTIVE a task, SET an event and alarm CALLBACK.</div><div><br /></div>
<table> <tr> <td> SYNTAX <span class ="italic"> Actions </span></td><td> ::= </td> <td>ACTIVATE </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>SET </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>CALLBACK </td> </tr>
</table>
<br />
<div class="commentBlock moduleComment tex2jax_ignore">

	To process the declaration of events. \\
	Result: a new event is created \\
	Condition: when I does not exist 
    </div><div><br /></div>
<div class="commentBlock moduleComment tex2jax_ignore">
 Function \emph{wrap} is used to wrap the statements. The wrapped statements is of type <span style="font-family: courier;">DeclStmt</span>, so that we can process each statement in the order how they are declared afterward. </div><div><br /></div>
<table> <tr> <td> SYNTAX <span class ="italic"> DeclStmt </span></td><td> ::= </td> <td>wrap ( <span class ="italic"> TaskProStmts </span>) </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>wrap ( <span class ="italic"> AlarmProStmts </span>) </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>wrap ( <span class ="italic"> AlarmProperties </span>) </td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td>wrap ( <span class ="italic"> CounterProStmts </span>)  [ <span class ="attribute"> function</span> ]</td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>wrap (  <span title="CounterProStmts" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> ) </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 <h3> Configuration of counter defined in OSEK specification </h3><br/>
    The counter serves as a base for the ALARM mechanism. In OSEK specification, a counter contains three attributes which are MAXALLOWEDVALUE, TICKSPERBASE and MINICYCLE.\\
    
     <h3> Configuration of counter in our implementation </h3><br/> 
    To process the declaration of counters. The MAXALLOWEDVALUE attribute defines the maximum allowed counter value. When the value of counter is the MAXALLOWEDVALUE at present, the counter value returns to 0 next time. The MINCYCLE attribute specifies the minimum allowed number of counter ticks for a cyclic alarm linked to the counter.\\
        Result: A sysCounter is created in the configuration.\\
        Conditon: If Id I is not used/declared in the system. </div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>COUNTER <span title ="Id">I </span> { <span title ="CounterProStmts">S2 </span> } ; </em></td></tr> <tr class='rewriteRight'> <td><em>wrap ( <span title ="CounterProStmts">S2 </span> ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">sysCounters</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="Bag">CT </span> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>&bull;</em></td></tr> <tr class='rewriteRight'> <td><em><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Id">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="#Int"> 0 </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">miniCycle</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="#Int"> 0 </span> </div> </div> </div>
</div> </div> </div>
</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">proId</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Id">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">types</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Map">M </span> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>.Map </em></td></tr> <tr class='rewriteRight'> <td><em>\(\) <span title ="Id">I </span> \(\mapsto\) sysCounter \(\)</em> </td> </tr> </table></div> </div> </div>
</div>  when \(\neg_{\scriptstyle\it Bool}\) (<span><span title ="Id">I </span> in keys ( <span title ="Map">M </span> ) </span>)\(\) [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center">wrap ( <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>MAXALLOWEDVALUE = <span title ="K">MAV </span> ;   <span title ="K">S2 </span>  </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">S2 </span> </em> </td> </tr> </table>) </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">proId</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">sysCounters</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">MAV </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
</div> </div> </div>
</div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center">wrap ( <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>MINICYCLE = <span title ="K">MC </span> ;   <span title ="K">S2 </span>  </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">S2 </span> </em> </td> </tr> </table>) </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">proId</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">miniCycle</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">MC </span> </div> </div> </div>
</div> </div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 <h3> Configuration of alarm defined in OSEK specification </h3><br/>
    An ALARM may be used to asynchronously inform or activate a specific task. In OSEK specification, an alarm contains three attributes which are COUNTER, ACTION and AUTOSTART.\\
     <h3> Configuration of alarm in implementation </h3><br/>
    To process the declaration of alarms. An ALARM may be used to asynchronously inform or activate a specific task. The COUNTER reference defines the counter assigned to this alarm. Only one counter has to be assigned to the alarm. Any alarm has to be assigned to a particular counter. The ACTION attribute has been introduced. The AUTOSTART attribute of type BOOLEAN defines if an alarm is started The SCHEDULE attribute defines the preemptability of the task. at system start-up or started by a task. If the alarm is autostarted, its alarmtime and cycletime are configured in its initial state. The value of cycletime depends on whether the alarm is cyclic. In case of single alarms, cycletime value shall be zero.\\
        Result: A new alarm is created in the configuration.\\
        Condition: If Id I is not used/declared in the system. </div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>ALARM <span title ="Id">I </span> { <span title ="AlarmProStmts">P </span> } ; </em></td></tr> <tr class='rewriteRight'> <td><em>wrap ( <span title ="AlarmProStmts">P </span> ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">types</span> </div><br /><div class="block defaultColor" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Map">M </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span>\(\) <span title ="Id">I </span> \(\mapsto\) alarm \(\)</span>)<span title ="Map">M </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">proId</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Id">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarms</span> </div><br /><div class="block defaultColor" style="min-width:4.2em"> <div class="center"><span title ="Bag">AL </span> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>&bull;</em></td></tr> <tr class='rewriteRight'> <td><em><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Id">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center">&bull;</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="#Int"> 0 </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cycleTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="#Int"> 0 </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cyclicity</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
</div> </div> </div>
</em> </td> </tr> </table></div> </div> </div>
</div>  when \(\neg_{\scriptstyle\it Bool}\) (<span><span title ="Id">I </span> in keys ( <span title ="Map">M </span> ) </span>)\(\) [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>wrap (  <span title="AlarmProStmts" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> ) </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>wrap (  <span title="AlarmProperties" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> ) </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center">wrap ( <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>COUNTER = <span title ="K">N </span> ;   <span title ="AlarmProStmts">P </span>  </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="AlarmProStmts">P </span> </em> </td> </tr> </table>) </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">proId</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">types</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">M </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">N </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cAlarm</span> </div><br /><div class="block defaultColor" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">L </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">L </span> ListItem ( <span title ="K">I </span> ) </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
</div>  when (<span><span title ="K">N </span> in keys ( <span title ="K">M </span> ) </span>)</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center">wrap ( COUNTER = <span title ="K">N </span> ;   <span title ="AlarmProStmts">P </span>  ) </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>.Set </em></td></tr> <tr class='rewriteRight'> <td><em>add ( stop , .Set ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">types</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">M </span> </div> </div> </div>
<table class="rewrite"> <tr class='rewriteLeft'> <td> <em>&bull;</em></td></tr> <tr class='rewriteRight'> <td><em><div class="cell"> <div class="tab curvedEdge black"><span class = "bold">errorCell</span> </div><br /><div class="block black" style="min-width:6.3em"> <div class="center">Error ( E_OS_CONF , <span title ="K">N </span> , \(\) \(\) <span title ="#String"> "sysCounter " </span> \(+_{\scriptstyle\it String}\) Id2String ( <span title ="K">N </span> ) \(\)\(+_{\scriptstyle\it String}\) <span title ="#String"> " does not exist!" </span> \(\)) </div> </div> </div>
</em> </td> </tr> </table></div>  when \(\) \(\neg_{\scriptstyle\it Bool}\) (<span><span title ="K">N </span> in keys ( <span title ="K">M </span> ) </span>)\(\)\(\vee_{\scriptstyle\it Bool}\) \(\) (<span><span title ="K">N </span> in keys ( <span title ="K">M </span> ) </span>)\(\wedge_{\scriptstyle\it Bool}\) (<span>\(\neg_{\scriptstyle\it Bool}\) (<span>(<span>\(\) <span title ="K">N </span> \(\mapsto\) sysCounter \(\)</span>)in values ( <span title ="K">M </span> ) </span>)\(\)</span>)\(\)\(\) [ <span class ="attribute"> structural</span> ]</div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 When executing the ACTION statement, a new cell cotaining the information of ACTION statement is generated. </div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>wrap ( ACTION = ACTIVATETASK { TASK = <span title ="K">T </span> ; } ;   <span title ="AlarmProStmts">P </span>  ) </em></td></tr> <tr class='rewriteRight'> <td><em>wrap ( <span title ="AlarmProStmts">P </span> ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">proId</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">actionType</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">action</span> </div><br /><div class="block defaultColor" style="min-width:4.2em"> <div class="center">ACTIVATE </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">actedId</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="K">T </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">actedType</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center">task </div> </div> </div>
</div> </div> </div>
</div> </div> </div>
</div> </div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 Varible AUTOSTART is false means this alarm must be started by users through API setrelalarm or setabsalarm. </div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center">wrap ( <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>AUTOSTART = false ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table>) </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">proId</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">autostart</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="#Bool"> false </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
</div> </div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 Varible AUTOSTART is true means this alarm is started when starting the system. </div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>wrap ( AUTOSTART = true { <span title ="AlarmProperties">P1 </span> } ; ) </em></td></tr> <tr class='rewriteRight'> <td><em>wrap ( <span title ="AlarmProperties">P1 </span> ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">proId</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">autostart</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="#Bool"> true </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
</div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center">wrap ( <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>ALARMTIME = <span title ="K">AT </span> ;   <span title ="AlarmProperties">P1 </span>  </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="AlarmProperties">P1 </span> </em> </td> </tr> </table>) </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">proId</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">autostart</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="#Bool"> true </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">AT </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
</div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center">wrap ( <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>CYCLETIME = <span title ="K">CT </span> ;   <span title ="K">P1 </span>  </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">P1 </span> </em> </td> </tr> </table>) </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">proId</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">autostart</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="#Bool"> true </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cyclicity</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="#Bool"> true </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cycleTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">CT </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
</div>  when <span title ="K">CT </span> != <span title ="#Int"> 0 </span> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center">wrap ( <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>CYCLETIME = <span title ="K">CT </span> ;   <span title ="K">P1 </span>  </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">P1 </span> </em> </td> </tr> </table>) </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">proId</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">autostart</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="#Bool"> true </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cyclicity</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="#Bool"> false </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cycleTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">CT </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
</div>  when <span title ="K">CT </span> == <span title ="#Int"> 0 </span> </div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 <h3> Configuration of task defined in OSEK specification </h3><br/>
  Seven attributes are included in task. They are PRIORITY, SCHEDULE, ACTIVATION, AUTOSTART, RESOURCE, EVENT and MESSAGE. The MESSAGE reference is used to define a list of messages accessed by the task.\\
  <h3> Configuration of task in implementation </h3><br/> 
  To process the task declaration. The priority of a task is defined by the value of the PRIORITY attribute. The larger the PRIORITY value is, the higher the priority is. The SCHEDULE attribute defines whether the task is preemptability. Same as alarm, the attribute AUTOSTART represents whether the task is started automatically when starting system or started by other tasks.\\
    Result: A new task is created when every property initialized according to the declarations \\
  Condition: when I does not exist in the current system 
   </div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">proId</span> </div><br /><div class="block defaultColor" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">I' </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="Id">I </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>TASK <span title ="Id">I </span> { <span title ="TaskProStmts">S </span> } ; </em></td></tr> <tr class='rewriteRight'> <td><em>wrap ( <span title ="TaskProStmts">S </span> ) </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<table class="rewrite"> <tr class='rewriteLeft'> <td> <em>&bull;</em></td></tr> <tr class='rewriteRight'> <td><em><div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">apiData</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center">&bull;</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">suspend </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Id">I </span> </div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tPriority</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="#Int"> 0 </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">ext</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">auto</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">historyK</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center">.List </div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center">&bull;</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">done</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">schedule</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center">NON </div> </div> </div>
</div> </div> </div>
</em> </td> </tr> </table><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">types</span> </div><br /><div class="block defaultColor" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Map">M </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span>\(\) <span title ="Id">I </span> \(\mapsto\) task \(\)</span>)<span title ="Map">M </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center">()</div> </div> </div>
</div>  when \(\neg_{\scriptstyle\it Bool}\) (<span><span title ="Id">I </span> in keys ( <span title ="Map">M </span> ) </span>)\(\) [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center">(<span>TASK <span title ="Id">I </span> { <span title ="TaskProStmts">A </span> } ; </span>)</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">types</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Map">M </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>.Set </em></td></tr> <tr class='rewriteRight'> <td><em>add ( stop , .Set ) </em> </td> </tr> </table></div> </div> </div>
</div>  when (<span><span title ="Id">I </span> in keys ( <span title ="Map">M </span> ) </span>) [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>TASK <span title ="Id">I </span> { <span title ="OSEKStmt">ST </span> } ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Id">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">apiData</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="OSEKStmt">ST </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center">()</div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>TASK <span title ="Id">I </span> { <span title ="OSEKStmt">ST </span> } ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">types</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Map">M </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>.Set </em></td></tr> <tr class='rewriteRight'> <td><em>add ( stop , .Set ) </em> </td> </tr> </table></div> </div> </div>
<table class="rewrite"> <tr class='rewriteLeft'> <td> <em>&bull;</em></td></tr> <tr class='rewriteRight'> <td><em><div class="cell"> <div class="tab curvedEdge black"><span class = "bold">errorCell</span> </div><br /><div class="block black" style="min-width:6.3em"> <div class="center">Error ( E_OS_CONF , <span title ="Id">I </span> , \(\) \(\) <span title ="#String"> "Task " </span> \(+_{\scriptstyle\it String}\) Id2String ( <span title ="Id">I </span> ) \(\)\(+_{\scriptstyle\it String}\) <span title ="#String"> " not exist!" </span> \(\)) </div> </div> </div>
</em> </td> </tr> </table></div>  when \(\) \(\neg_{\scriptstyle\it Bool}\) (<span><span title ="Id">I </span> in keys ( <span title ="Map">M </span> ) </span>)\(\)\(\vee_{\scriptstyle\it Bool}\) (<span>\(\) (<span><span title ="Id">I </span> in keys ( <span title ="Map">M </span> ) </span>)\(\wedge_{\scriptstyle\it Bool}\) (<span>\(\neg_{\scriptstyle\it Bool}\) (<span>(<span>\(\) <span title ="Id">I </span> \(\mapsto\) task \(\)</span>)in values ( <span title ="Map">M </span> ) </span>)\(\)</span>)\(\)</span>)\(\) [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>wrap (  <span title="TaskProStmts" class = "bold"> &nbsp;&nbsp;&middot;&nbsp;&nbsp;</span> ) </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 The following rules are used to process each declaration statement for task </div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center">wrap ( <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>AUTOSTART = <span title ="K">B </span> ;   <span title ="TaskProStmts">A </span>  </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="TaskProStmts">A </span> </em> </td> </tr> </table>) </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">proId</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">auto</span> </div><br /><div class="block defaultColor" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">B </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center">()</div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center">wrap ( <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>PRIORITY = <span title ="K">N </span> ;   <span title ="TaskProStmts">A </span>  </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="TaskProStmts">A </span> </em> </td> </tr> </table>) </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">proId</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tPriority</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab straightEdge defaultColor"><span class = "bold">types</span> </div><br /><div class="block left right defaultColor" > <div class="center">(<span>\(\) <span title ="K">I </span> \(\mapsto\) task \(\)</span>)</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center">()</div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 Change the type of task from basic to exented when the first event declaration statement is processed. 
       The event is added to the taskEvents cell. It is mapped to a value SET in the cell. That is, the value 
       of this event owned by the task is unique to the task, as specified by the OSEK/VDX standard. 
       The task is added to the owner list of the event 
     </div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center">wrap ( <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>SCHEDULE = <span title ="K">SCH </span> ;   <span title ="TaskProStmts">A </span>  </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="TaskProStmts">A </span> </em> </td> </tr> </table>) </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">proId</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Id">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Id">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">schedule</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">SCH </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center">()</div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center">wrap ( <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>ACTIVATION = <span title ="K">N </span> ;   <span title ="K">A </span>  </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">A </span> </em> </td> </tr> </table>) </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">proId</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">activationTime</span> </div><br /><div class="block defaultColor" style="min-width:9.8em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center">()</div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>int <span title ="K">I </span> ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block right defaultColor" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>&bull;</em></td></tr> <tr class='rewriteRight'> <td><em>\(\) <span title ="K">I </span> \(\mapsto\) <span title ="#Int"> 0 </span> \(\)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">types</span> </div><br /><div class="block right defaultColor" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>&bull;</em></td></tr> <tr class='rewriteRight'> <td><em>\(\) <span title ="K">I </span> \(\mapsto\) int \(\)</em> </td> </tr> </table></div> </div> </div>
</div>  [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em><div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center">&bull;</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="Id"> initialTask </span> </div> </div> </div>
</div> </div> </div>
</em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
END MODULE </div>
<br />
<div>MODULE <span class="large">OSEK-TASK</span> <br /> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 Define the semantics of <span style="font-family: courier;">auto start</span>.  If a task is auto-started and the program is not in the TCG mode, 
       it is put into ready list and send a schedule signal to invoke the scheduler. The system calls is loaded and they 
       are going to be executed by the system. </div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">auto</span> </div><br /><div class="block defaultColor" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="#Bool"> true </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="#Bool"> false </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>suspend </em></td></tr> <tr class='rewriteRight'> <td><em>ready </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tPriority</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="Int">N </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">apiData</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="OSEKStmt">S </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>&bull;</em></td></tr> <tr class='rewriteRight'> <td><em><span title ="OSEKStmt">S </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">readyTasks</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="ListTaskPair">LTP </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( <span title ="K">I </span> , <span title ="Int">N </span> , <span title ="ListTaskPair">LTP </span> ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>.Set </em></td></tr> <tr class='rewriteRight'> <td><em>add ( schedule , .Set ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tcgMode</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
</div>  [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Stmt">S </span> &bull;</em></td></tr> <tr class='rewriteRight'> <td><em><span title ="Stmt">S </span> </em> </td> </tr> </table></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> SysApi </span></td><td> ::= </td> <td>getApi ( <span class ="italic"> A&Pi;Stmt </span>)  [ <span class ="attribute"> function</span> ]</td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>getApi ( ActivateTask ( <span title ="K">R </span> ) ; ) </em></td></tr> <tr class='rewriteRight'> <td><em>ActivateTask </em> </td> </tr> </table></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>getApi ( ChainTask ( <span title ="K">R </span> ) ; ) </em></td></tr> <tr class='rewriteRight'> <td><em>ChainTask </em> </td> </tr> </table></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>getApi ( TerminateTask ( ) ; ) </em></td></tr> <tr class='rewriteRight'> <td><em>TerminateTask </em> </td> </tr> </table></div> </div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> OSEKStmt </span></td><td> ::= </td> <td>convert2apis ( <span class ="italic"> List </span>)  [ <span class ="attribute"> function</span> ]</td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>convert2apis ( .List ) </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>convert2apis ( ListItem ( <span title ="APIStmt">A </span> ) <span title ="K">L </span> ) </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="APIStmt">A </span> convert2apis ( <span title ="K">L </span> ) </span>)</em> </td> </tr> </table></div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 For a suspend task, if it has been activated when it is running. The activated action is stored in cell
    activatedTime. If the number of 
    </div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>suspend </em></td></tr> <tr class='rewriteRight'> <td><em>ready </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tPriority</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">activatedTime</span> </div><br /><div class="block defaultColor" style="min-width:9.1em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">N1 </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N1 </span> - <span title ="#Int"> 1 </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">readyTasks</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="ListTaskPair">L </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( <span title ="K">I </span> , <span title ="K">N </span> , <span title ="ListTaskPair">L </span> ) </em> </td> </tr> </table></div> </div> </div>
</div>  when ! (<span>\(\) <span title ="K">N1 </span> \(\leq\) <span title ="#Int"> 0 </span> \(\)</span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 API:       TerminateTask(TaskID)\\
       Parameter: TaskID\\
       Result:    Task<TaskID> suspends itself and sends a signal to schedule.\\
       Condition: Task<TaskID> to be terminated can not occupy any resources; TerminateTask() must be the
       last API of the running task.</div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>running </em></td></tr> <tr class='rewriteRight'> <td><em>suspend </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>TerminateTask ( ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N1 </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">runningTask</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">I </span> </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Set">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( schedule , <span title ="Set">S </span> ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tcgMode</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
</div>  when (<span>\(\) <span title ="K">RV </span> \(\leq\) <span title ="K">N1 </span> \(\)</span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>running </em></td></tr> <tr class='rewriteRight'> <td><em>suspend </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>TerminateTask ( ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N1 </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">runningTask</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">I </span> </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Set">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( schedule , alarmed , <span title ="Set">S </span> ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tcgMode</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
</div>  when (<span><span title ="K">RV </span> == <span title ="K">N1 </span> </span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
(<span><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">k</span> </div><br /><div class="block defaultColor" > <div class="center">TerminateTask ( ) ; <span title ="OSEKStmt">A </span> </div> </div> </div>
</span>)</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">runningTask</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">I </span> </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>.Set </em></td></tr> <tr class='rewriteRight'> <td><em>add ( stop , .Set ) </em> </td> </tr> </table></div> </div> </div>
<br /><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>&bull;</em></td></tr> <tr class='rewriteRight'> <td><em><div class="cell"> <div class="tab curvedEdge black"><span class = "bold">errorCell</span> </div><br /><div class="block black" style="min-width:6.3em"> <div class="center">Error ( E_OS_UNDEF , <span title ="K">I </span> , TerminateTask ( ) ; , \(\) <span title ="#String"> "TerminateTask() is not the last A&Pi; in task " </span> \(+_{\scriptstyle\it String}\) Id2String ( <span title ="K">I </span> ) \(\)) </div> </div> </div>
</em> </td> </tr> </table><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tcgMode</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
</div>  [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
(<span><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">k</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="APIStmt">A </span> </div> </div> </div>
</span>)</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">runningTask</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">I </span> </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>.Set </em></td></tr> <tr class='rewriteRight'> <td><em>add ( stop , .Set ) </em> </td> </tr> </table></div> </div> </div>
<br /><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>&bull;</em></td></tr> <tr class='rewriteRight'> <td><em><div class="cell"> <div class="tab curvedEdge black"><span class = "bold">errorCell</span> </div><br /><div class="block black" style="min-width:6.3em"> <div class="center">Error ( E_OS_UNDEF , <span title ="K">I </span> , <span title ="APIStmt">A </span> , \(\) <span title ="#String"> "The last A&Pi; should be TerminateTask or ChainTask in task " </span> \(+_{\scriptstyle\it String}\) Id2String ( <span title ="K">I </span> ) \(\)) </div> </div> </div>
</em> </td> </tr> </table><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tcgMode</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
</div>  when \(\) \(\) getApi ( <span title ="APIStmt">A </span> ) \(\mathrel{\neq_K}\) TerminateTask \(\)\(\wedge_{\scriptstyle\it Bool}\) \(\) getApi ( <span title ="APIStmt">A </span> ) \(\mathrel{\neq_K}\) ChainTask \(\)\(\) [ <span class ="attribute"> transition</span> ]</div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 Define the semantics of API TerminateTask. 
       In the TCG mode, there are two cases to deal with. First, if it is the first time for the task to 
       terminate, it means the initialization of the task is completed. The apis is stored in the 
       <span style="font-family: courier;">apiData</span> cell accorrding to the history of the execution of the task. 
       If it is not the first time for the task to terminate, it just terminates as in the non-TCG mode. 
       The condition to judge the whether it is the first time is to check whether the cell 
       <span style="font-family: courier;">apiData</span> is empty. 
    </div><div><br /></div>
<div class="commentBlock moduleComment tex2jax_ignore">
 Define the errors caused by TerminateTask()</div><div><br /></div>
<div class="commentBlock moduleComment tex2jax_ignore">
API:       ChainTask(TaskID) \\
       Parameter: TaskID\\
       Result:    The running task terminates itself and activates task<TaskID> \\
       Condition: The task to be terminated can not occupy any resources; ChainTask() must be the
       last API of the running task; task<TaskID> is not in the readyTask list.</div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>running </em></td></tr> <tr class='rewriteRight'> <td><em>suspend </em> </td> </tr> </table></div> </div> </div>
(<span><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">k</span> </div><br /><div class="block defaultColor" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>ChainTask ( <span title ="K">T </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</span>)</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">T </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tPriority</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>suspend </em></td></tr> <tr class='rewriteRight'> <td><em>ready </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>&bull;</em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">AS </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">apiData</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="K">AS </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">runningTask</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">I </span> </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Set">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( schedule , <span title ="Set">S </span> ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N1 </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tcgMode</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">readyTasks</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="ListTaskPair">RT </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( <span title ="K">T </span> , <span title ="K">N </span> , <span title ="ListTaskPair">RT </span> ) </em> </td> </tr> </table></div> </div> </div>
</div>  when (<span>\(\) <span title ="K">RV </span> \(\leq\) <span title ="K">N1 </span> \(\)</span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>running </em></td></tr> <tr class='rewriteRight'> <td><em>ready </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tPriority</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N </span> </div> </div> </div>
(<span><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">k</span> </div><br /><div class="block defaultColor" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>ChainTask ( <span title ="K">I </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</span>)</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">runningTask</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">I </span> </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Set">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( schedule , <span title ="Set">S </span> ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N1 </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tcgMode</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
<br /></div>  when (<span>\(\) <span title ="K">RV </span> \(\leq\) <span title ="K">N1 </span> \(\)</span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>running </em></td></tr> <tr class='rewriteRight'> <td><em>suspend </em> </td> </tr> </table></div> </div> </div>
(<span><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">k</span> </div><br /><div class="block defaultColor" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>ChainTask ( <span title ="K">T </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</span>)</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">T </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tPriority</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>suspend </em></td></tr> <tr class='rewriteRight'> <td><em>ready </em> </td> </tr> </table></div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>&bull;</em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">AS </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">apiData</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="K">AS </span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">runningTask</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">I </span> </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Set">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( schedule , alarmed , <span title ="Set">S </span> ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N1 </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tcgMode</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">readyTasks</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="ListTaskPair">RT </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( <span title ="K">T </span> , <span title ="K">N </span> , <span title ="ListTaskPair">RT </span> ) </em> </td> </tr> </table></div> </div> </div>
</div>  when (<span><span title ="K">RV </span> == <span title ="K">N1 </span> </span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>running </em></td></tr> <tr class='rewriteRight'> <td><em>ready </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tPriority</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N </span> </div> </div> </div>
(<span><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">k</span> </div><br /><div class="block defaultColor" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>ChainTask ( <span title ="K">I </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</span>)</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">runningTask</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">I </span> </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Set">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( schedule , <span title ="Set">S </span> ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N1 </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tcgMode</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
</div>  when (<span>\(\) <span title ="K">RV </span> \(\leq\) <span title ="K">N1 </span> \(\)</span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>running </em></td></tr> <tr class='rewriteRight'> <td><em>ready </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tPriority</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N </span> </div> </div> </div>
(<span><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">k</span> </div><br /><div class="block defaultColor" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>ChainTask ( <span title ="K">I </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</span>)</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">runningTask</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">I </span> </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Set">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( schedule , alarmed , <span title ="Set">S </span> ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N1 </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tcgMode</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
</div>  when (<span><span title ="K">RV </span> == <span title ="K">N1 </span> </span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
(<span><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">k</span> </div><br /><div class="block defaultColor" > <div class="center">ChainTask ( <span title ="K">T </span> ) ; <span title ="K">A </span> </div> </div> </div>
</span>)</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">runningTask</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">I </span> </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>.Set </em></td></tr> <tr class='rewriteRight'> <td><em>add ( stop , .Set ) </em> </td> </tr> </table></div> </div> </div>
<table class="rewrite"> <tr class='rewriteLeft'> <td> <em>&bull;</em></td></tr> <tr class='rewriteRight'> <td><em><div class="cell"> <div class="tab curvedEdge black"><span class = "bold">errorCell</span> </div><br /><div class="block black" style="min-width:6.3em"> <div class="center">Error ( E_OS_UNDEF , <span title ="K">I </span> , ChainTask ( <span title ="K">T </span> ) ; , <span title ="#String"> "ChainTask is not the last A&Pi;!" </span> ) </div> </div> </div>
</em> </td> </tr> </table><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tcgMode</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
</div>  when \(\) <span title ="K">A </span> \(\mathrel{\neq_K}\) &bull;\(\) [ <span class ="attribute"> transition</span> ]</div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 Define the semantics of API ChainTask in the TCG mode.  
       Similar to TerminateTask, in the TCG mode, there are two cases to deal with.  
       First, if it is the first time for the task to terminate, it means the initialization of the task is completed. 
       The apis is stored in the <span style="font-family: courier;">apiData</span> cell accorrding to the history of the execution of the task. 
       If it is not the first time for the task to terminate, it just terminates as in the non-TCG mode. 
       The condition to judge whether it is the first time is to check whether the cell 
       <span style="font-family: courier;">apiData</span> is empty. 
       After ChainTask, APIs of the succeeding task are initialized to the be those in the cell <span style="font-family: courier;">apiData</span>. 
    </div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>running </em></td></tr> <tr class='rewriteRight'> <td><em>suspend </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>ChainTask ( <span title ="K">T </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">T </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">ready </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">activationTime</span> </div><br /><div class="block defaultColor" style="min-width:9.8em"> <div class="center"><span title ="K">N </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">activatedTime</span> </div><br /><div class="block defaultColor" style="min-width:9.1em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">N1 </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N1 </span> + <span title ="#Int"> 1 </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Set">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( schedule , <span title ="Set">S </span> ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">AT </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
</div>  when (<span>\(\) <span title ="K">RV </span> \(\leq\) <span title ="K">AT </span> \(\)</span>)&& \(\) <span title ="K">N1 </span> \(\leq\) <span title ="K">N </span> \(\) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>running </em></td></tr> <tr class='rewriteRight'> <td><em>suspend </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>ChainTask ( <span title ="K">T </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">T </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">ready </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">activationTime</span> </div><br /><div class="block defaultColor" style="min-width:9.8em"> <div class="center"><span title ="K">N </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">activatedTime</span> </div><br /><div class="block defaultColor" style="min-width:9.1em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">N1 </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N1 </span> + <span title ="#Int"> 1 </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Set">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( schedule , alarmed , <span title ="Set">S </span> ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">AT </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
</div>  when (<span><span title ="K">RV </span> == <span title ="K">AT </span> </span>)&& \(\) <span title ="K">N1 </span> \(\leq\) <span title ="K">N </span> \(\) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center">ChainTask ( <span title ="K">T </span> ) ; <span title ="K">A </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">apiData</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="K">ST </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">historyK</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">L </span> </em></td></tr> <tr class='rewriteRight'> <td><em>#if \(\) <span title ="K">B </span> \(\wedge_{\scriptstyle\it Bool}\) \(\) <span title ="K">ST </span> \(\mathrel{=_K}\) &bull;\(\)\(\)#then <span title ="K">L </span> ListItem ( ChainTask ( <span title ="K">T </span> ) ; ) #else <span title ="K">L </span> #fi </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>.Set </em></td></tr> <tr class='rewriteRight'> <td><em>add ( stop , .Set ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tcgMode</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="K">B </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">types</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">M </span> </div> </div> </div>
<table class="rewrite"> <tr class='rewriteLeft'> <td> <em>&bull;</em></td></tr> <tr class='rewriteRight'> <td><em><div class="cell"> <div class="tab curvedEdge black"><span class = "bold">errorCell</span> </div><br /><div class="block black" style="min-width:6.3em"> <div class="center">Error ( E_OS_ID , <span title ="K">I </span> , ChainTask ( <span title ="K">T </span> ) ; , <span title ="#String"> "Invalid task ID!" </span> ) </div> </div> </div>
</em> </td> </tr> </table></div>  when \(\) \(\neg_{\scriptstyle\it Bool}\) (<span><span title ="K">T </span> in keys ( <span title ="K">M </span> ) </span>)\(\)\(\vee_{\scriptstyle\it Bool}\) (<span>\(\neg_{\scriptstyle\it Bool}\) (<span>(<span>\(\) <span title ="K">T </span> \(\mapsto\) task \(\)</span>)in values ( <span title ="K">M </span> ) </span>)\(\)</span>)\(\) [ <span class ="attribute"> transition</span> ]</div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 Definition of the semantics of ActivateTask. 
   </div><div><br /></div>
<div class="commentBlock moduleComment tex2jax_ignore">
API:       ActivateTask(TaskID) \\
       Parameter: TaskID\\
       Result:    The task<TaskID> is transferred from the suspend state into the ready state. \\
       Condition: Task<TaskID> is not the running task; task<TaskID> is not in the readyTask list.</div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">schedule</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center">FULL </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>ActivateTask ( <span title ="K">T </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tPriority</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N' </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">apiData</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="K">ST </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">historyK</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">L' </span> </em></td></tr> <tr class='rewriteRight'> <td><em>#if \(\) <span title ="K">B </span> \(\wedge_{\scriptstyle\it Bool}\) \(\) <span title ="K">ST </span> \(\mathrel{=_K}\) &bull;\(\)\(\)#then <span title ="K">L' </span> ListItem ( ActivateTask ( <span title ="K">T </span> ) ; ) #else <span title ="K">L' </span> #fi </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">T </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>suspend </em></td></tr> <tr class='rewriteRight'> <td><em>ready </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tPriority</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>&bull;</em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">AS </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">apiData</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="K">AS </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">ext</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Set">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span>#if \(\) <span title ="K">N' </span> \(\mathrel{<_{\scriptstyle\it Int}}\) <span title ="K">N </span> \(\)#then add ( schedule , <span title ="Set">S </span> ) #else <span title ="Set">S </span> #fi </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N1 </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">readyTasks</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="ListTaskPair">L </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( <span title ="K">T </span> , <span title ="K">N </span> , <span title ="ListTaskPair">L </span> ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tcgMode</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="K">B </span> </div> </div> </div>
</div>  when (<span>\(\) <span title ="K">RV </span> \(\leq\) <span title ="K">N1 </span> \(\)</span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">schedule</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center">FULL </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>ActivateTask ( <span title ="K">T </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tPriority</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N' </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">apiData</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="K">ST </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">historyK</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">L' </span> </em></td></tr> <tr class='rewriteRight'> <td><em>#if \(\) <span title ="K">B </span> \(\wedge_{\scriptstyle\it Bool}\) \(\) <span title ="K">ST </span> \(\mathrel{=_K}\) &bull;\(\)\(\)#then <span title ="K">L' </span> ListItem ( ActivateTask ( <span title ="K">T </span> ) ; ) #else <span title ="K">L' </span> #fi </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">T </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>suspend </em></td></tr> <tr class='rewriteRight'> <td><em>ready </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tPriority</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>&bull;</em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">AS </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">apiData</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="K">AS </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">ext</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Set">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span>#if \(\) <span title ="K">N' </span> \(\mathrel{<_{\scriptstyle\it Int}}\) <span title ="K">N </span> \(\)#then add ( schedule , alarmed , <span title ="Set">S </span> ) #else add ( alarmed , <span title ="Set">S </span> ) #fi </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N1 </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">readyTasks</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="ListTaskPair">L </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( <span title ="K">T </span> , <span title ="K">N </span> , <span title ="ListTaskPair">L </span> ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tcgMode</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="K">B </span> </div> </div> </div>
</div>  when (<span><span title ="K">RV </span> == <span title ="K">N1 </span> </span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">T </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>ActivateTask ( <span title ="K">T </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tPriority</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N' </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">activationTime</span> </div><br /><div class="block defaultColor" style="min-width:9.8em"> <div class="center"><span title ="K">N </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">activatedTime</span> </div><br /><div class="block defaultColor" style="min-width:9.1em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">N1 </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N1 </span> + <span title ="#Int"> 1 </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">AT </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
</div>  when (<span>\(\) <span title ="K">RV </span> \(\leq\) <span title ="K">AT </span> \(\)</span>)&& \(\) <span title ="K">N1 </span> \(\leq\) <span title ="K">N </span> \(\) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">T </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>ActivateTask ( <span title ="K">T </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tPriority</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N' </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">activationTime</span> </div><br /><div class="block defaultColor" style="min-width:9.8em"> <div class="center"><span title ="K">N </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">activatedTime</span> </div><br /><div class="block defaultColor" style="min-width:9.1em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">N1 </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N1 </span> + <span title ="#Int"> 1 </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Set">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( alarmed , <span title ="Set">S </span> ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">AT </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
</div>  when (<span><span title ="K">RV </span> == <span title ="K">AT </span> </span>)&& \(\) <span title ="K">N1 </span> \(\leq\) <span title ="K">N </span> \(\) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">schedule</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center">NON </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>ActivateTask ( <span title ="K">T </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><span title ="Set">S </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N1 </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
</div>  when (<span>\(\) <span title ="K">RV </span> \(\leq\) <span title ="K">N1 </span> \(\)</span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">schedule</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center">NON </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>ActivateTask ( <span title ="K">T </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Set">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( alarmed , <span title ="Set">S </span> ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N1 </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
</div>  when (<span><span title ="K">RV </span> == <span title ="K">N1 </span> </span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 The following three rules define the errors caused by API ActivateTask 
   </div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">T </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center">(<span>ActivateTask ( <span title ="K">T </span> ) ; </span>)</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">apiData</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="K">ST </span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>.Set </em></td></tr> <tr class='rewriteRight'> <td><em>add ( stop , .Set ) </em> </td> </tr> </table></div> </div> </div>
<br /><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>&bull;</em></td></tr> <tr class='rewriteRight'> <td><em><div class="cell"> <div class="tab curvedEdge black"><span class = "bold">errorCell</span> </div><br /><div class="block black" style="min-width:6.3em"> <div class="center">Error ( E_OS_UNDEF , <span title ="K">T </span> , ActivateTask ( <span title ="K">T </span> ) ; , <span title ="#String"> "Task cannot activate itself!" </span> ) </div> </div> </div>
</em> </td> </tr> </table></div>  [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center">(<span>ActivateTask ( <span title ="K">T </span> ) ; </span>)<span title ="K">A </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">apiData</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="K">ST </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">T </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">ready </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>.Set </em></td></tr> <tr class='rewriteRight'> <td><em>add ( stop , .Set ) </em> </td> </tr> </table></div> </div> </div>
<table class="rewrite"> <tr class='rewriteLeft'> <td> <em>&bull;</em></td></tr> <tr class='rewriteRight'> <td><em><div class="cell"> <div class="tab curvedEdge black"><span class = "bold">errorCell</span> </div><br /><div class="block black" style="min-width:6.3em"> <div class="center">Error ( E_OS_UNDEF , <span title ="K">I </span> , ActivateTask ( <span title ="K">T </span> ) ; , <span title ="#String"> "Task cannot activate a ready task!" </span> ) </div> </div> </div>
</em> </td> </tr> </table></div>  [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center">(<span>ActivateTask ( <span title ="K">T </span> ) ; </span>)<span title ="K">A </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">apiData</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="K">ST </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>.Set </em></td></tr> <tr class='rewriteRight'> <td><em>add ( stop , .Set ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">types</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">M </span> </div> </div> </div>
<table class="rewrite"> <tr class='rewriteLeft'> <td> <em>&bull;</em></td></tr> <tr class='rewriteRight'> <td><em><div class="cell"> <div class="tab curvedEdge black"><span class = "bold">errorCell</span> </div><br /><div class="block black" style="min-width:6.3em"> <div class="center">Error ( E_OS_ID , <span title ="K">I </span> , ActivateTask ( <span title ="K">T </span> ) ; , <span title ="#String"> "Invalid task id!" </span> ) </div> </div> </div>
</em> </td> </tr> </table></div>  when \(\) \(\neg_{\scriptstyle\it Bool}\) (<span><span title ="K">T </span> in keys ( <span title ="K">M </span> ) </span>)\(\)\(\vee_{\scriptstyle\it Bool}\) (<span>\(\neg_{\scriptstyle\it Bool}\) (<span>(<span>\(\) <span title ="K">T </span> \(\mapsto\) task \(\)</span>)in values ( <span title ="K">M </span> ) </span>)\(\)</span>)\(\)</div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 Definition of the semantics of Schedule. 
   </div><div><br /></div>
<div class="commentBlock moduleComment tex2jax_ignore">
API:       Schedule() \\
       Parameter: none\\
       Result:    If a task with higher-priority is ready, the current task is put into ready task and the internal resource of the task is released. The higher-priority task are executed in the order of priority.\\
       Condition: The running task is non preemptable.</div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>.Set </em></td></tr> <tr class='rewriteRight'> <td><em>add ( schedule , .Set ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">schedule</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center">NON </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>running </em></td></tr> <tr class='rewriteRight'> <td><em>ready </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>Schedule ( ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N1 </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
</div>  when (<span>\(\) <span title ="K">RV </span> \(\leq\) <span title ="K">N1 </span> + <span title ="K">RV </span> \(\)</span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>.Set </em></td></tr> <tr class='rewriteRight'> <td><em>add ( schedule , alarmed , .Set ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">schedule</span> </div><br /><div class="block defaultColor" style="min-width:5.6em"> <div class="center">NON </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>running </em></td></tr> <tr class='rewriteRight'> <td><em>ready </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>Schedule ( ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N1 </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
</div>  when (<span><span title ="K">RV </span> == <span title ="K">N1 </span> + <span title ="K">RV </span> </span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 Define the semantics of DeclareTask 

   </div><div><br /></div>
<div class="commentBlock moduleComment tex2jax_ignore">
 Define the semantics of GetTaskID 

   </div><div><br /></div>
<div class="commentBlock moduleComment tex2jax_ignore">
 Define the semantics of GetTaskState 

   </div><div><br /></div>
END MODULE </div>
<br />
<div>MODULE <span class="large">OSEK-SCHEDULING</span> <br /> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>SetItem ( schedule ) .Set </em></td></tr> <tr class='rewriteRight'> <td><em>.Set </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">readyTasks</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>(<span>&lt; <span title ="K">I </span> ; <span title ="K">N </span> >   <span title ="ListTaskPair">L </span>  </span>)</em></td></tr> <tr class='rewriteRight'> <td><em>add ( <span title ="K">I' </span> , <span title ="K">N' </span> , <span title ="ListTaskPair">L </span> ) </em> </td> </tr> </table></div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I' </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>running </em></td></tr> <tr class='rewriteRight'> <td><em>ready </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tPriority</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N' </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>ready </em></td></tr> <tr class='rewriteRight'> <td><em>running </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">runningTask</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">I' </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">I </span> </em> </td> </tr> </table></div> </div> </div>
<br /></div>  when \(\) <span title ="K">N </span> \(\mathrel{>_{\scriptstyle\it Int}}\) <span title ="K">N' </span> \(\) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>SetItem ( schedule ) .Set </em></td></tr> <tr class='rewriteRight'> <td><em>.Set </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">readyTasks</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>(<span>&lt; <span title ="K">I </span> ; <span title ="K">N </span> >   <span title ="ListTaskPair">L </span>  </span>)</em></td></tr> <tr class='rewriteRight'> <td><em><span title ="ListTaskPair">L </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>ready </em></td></tr> <tr class='rewriteRight'> <td><em>running </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">runningTask</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>&bull;</em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">I </span> </em> </td> </tr> </table></div> </div> </div>
</div>  [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>SetItem ( schedule ) .Set </em></td></tr> <tr class='rewriteRight'> <td><em>.Set </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">readyTasks</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>(<span>&lt; <span title ="K">I </span> ; <span title ="K">N </span> > </span>)</em></td></tr> <tr class='rewriteRight'> <td><em>&lt; <span title ="K">I' </span> ; <span title ="K">N' </span> > </em> </td> </tr> </table></div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I' </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>running </em></td></tr> <tr class='rewriteRight'> <td><em>ready </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tPriority</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N' </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>ready </em></td></tr> <tr class='rewriteRight'> <td><em>running </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">runningTask</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">I' </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">I </span> </em> </td> </tr> </table></div> </div> </div>
</div>  when \(\) <span title ="K">N </span> \(\mathrel{>_{\scriptstyle\it Int}}\) <span title ="K">N' </span> \(\) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>SetItem ( schedule ) .Set </em></td></tr> <tr class='rewriteRight'> <td><em>.Set </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">readyTasks</span> </div><br /><div class="block right blue" style="min-width:7.0em"> <div class="center">&lt; <span title ="K">I </span> ; <span title ="K">N </span> > </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tPriority</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N' </span> </div> </div> </div>
</div> </div> </div>
</div>  when \(\neg_{\scriptstyle\it Bool}\) \(\) <span title ="K">N </span> \(\mathrel{>_{\scriptstyle\it Int}}\) <span title ="K">N' </span> \(\)\(\) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>SetItem ( schedule ) .Set </em></td></tr> <tr class='rewriteRight'> <td><em>.Set </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
</div> </div> </div>
</div>  [ <span class ="attribute"> transition</span> ]</div> <br />
END MODULE </div>
<br />
<div>MODULE <span class="large">OSEK-ALARM</span> <br /> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 <h2> alarm </h2><br/>
  In this section, we give the K semantic of some APIs about alarm. Besides, when alarmed signal arrives, transition of some states are also defined in this section.
  \par It's well known that OSEK operating system offers alarm mechanism, which is to say an alarm will expire when a predefined counter value is reached. Some actions such as activate tasks, set events or call an alarm callback routine are taken place when alarm expires. 
  \par In our model, counter and alarm have been abstracted. According to the OSEK standard, an attribute TICKSPERBASE, which specifies the number of timer's ticks required to reach a counter unit, is defined. Different counters correspond to different TICKSPERBASE. A particular counter, called system counter acts as a global counter in the system. In order to describe the system more intuitively, we just take system counter into consideration. All of the alarms employ system sounter in our model, which are consistent with the applications offered by our cooperate company.
  \par For an application of OSEK OS, we assume that the excutions of basic statements don't cost time, while the excution time of each API is one unit, i.e. plus one to the value of counter. After each API having been excuted, the value of counter should be compared with alarmTime to check whether the alarm expires. </div><div><br /></div>
<div class="commentBlock moduleComment tex2jax_ignore">
 This rule describe the condition when an alarmed signal arrives. Since the action of this alarm is ACTIVE, a task is going to be actived here. The informations about this task have been stored in cell actionType.
   \par Considerring a special condition, assume that task A just has excuted API ActiveTask(B) and the schedule signal reaches. At the same time, its corresponding alarm expires. The alarm asks to active task C. How to deal with schedule and alarm in this case? And which task can be scheduled.
   \par We don't get any information about whether it can be interrupted during the excution of API ActiveTask() and schedule a task according to OSEK specification. However, the specification specifies that the priority of interrupt is the highest. when an interrupt signal arrives, the system needs to pause anything it is doing now and to deal with the interrupt signal. Alarm is a kind of interrupt. Thus, we infer that the excution of API ActiveTask() and schedule a task is not atomic. 
   \par For that special condition, if alarmed and schedule signal reach at the same time, we handle alarmed signal at first. Since alarm asks to active task C, this task will be scheduled and put into readyTask list. Then the alarm complishes its action. Task A continues to excute its statements and Task B is to be scheduled. </div><div><br /></div>
<div class="commentBlock moduleComment tex2jax_ignore">
 Since nested interrupt is not allowed according to OSEK specification, we assume that dealing with actions of an alarm spends time while checking whether alarm expires is not done in this process.

   </div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Set">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span>#if \(\) <span title ="K">N' </span> \(\mathrel{<_{\scriptstyle\it Int}}\) <span title ="K">N </span> \(\)#then add ( schedule , \(\) <span title ="Set">S </span> \(-_{\it Set}\) SetItem ( alarmed ) \(\)) #else (<span>\(\) <span title ="Set">S </span> \(-_{\it Set}\) SetItem ( alarmed ) \(\)</span>)#fi </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tPriority</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N' </span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">T </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>suspend </em></td></tr> <tr class='rewriteRight'> <td><em>ready </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tPriority</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N </span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">readyTasks</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="ListTaskPair">L </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( <span title ="K">T </span> , <span title ="K">N </span> , <span title ="ListTaskPair">L </span> ) </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">tcgMode</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="K">B </span> </div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N1 </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">actionType</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">action</span> </div><br /><div class="block defaultColor" style="min-width:4.2em"> <div class="center">ACTIVATE </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">actedId</span> </div><br /><div class="block defaultColor" style="min-width:4.9em"> <div class="center"><span title ="K">T </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">actedType</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center">task </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
</div>  when alarmed in <span title ="Set">S </span>  [ <span class ="attribute"> transition</span> ]</div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 The following rules define four APIs about alarm.</div><div><br /></div>
<div class="commentBlock moduleComment tex2jax_ignore">
 API:       SetRelAlarm(AlarmID, increment, cycle) \\
       Parameter: AlarmID, increment (Relative value in counter), cycle (Cycle value in case of cyclic alarm. In case of single alarms, cycle shall be zero)\\
       Result:    The system service occupies the alarm<AlarmID> element. \\
       Condition: The alarm<AlarmID> must not already be in use.</div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>SetRelAlarm ( <span title ="K">I </span> , <span title ="K">N1 </span> , <span title ="K">N2 </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N1 </span> + (<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cycleTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N2 </span> </em> </td> </tr> </table></div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cyclicity</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="#Bool"> true </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
</div>  when (<span><span title ="K">N2 </span> != <span title ="#Int"> 0 </span> </span>)&& (<span>\(\) <span title ="K">RV </span> \(\leq\) <span title ="K">N1 </span> + <span title ="K">RV </span> \(\)</span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 The OSEK specification doesn't specify the cases that value of N1 is 0, thus in our definition of OIL, the alarm expires immediately in this condition. Note that the currenValue represents for value of counter after excuting this API, hence the alarmTime is N1 plus currentTime. </div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>SetRelAlarm ( <span title ="K">I </span> , <span title ="K">N1 </span> , <span title ="K">N2 </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N1 </span> + (<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cycleTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N2 </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cyclicity</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="#Bool"> true </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Set">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( alarmed , <span title ="Set">S </span> ) </em> </td> </tr> </table></div> </div> </div>
</div>  when (<span><span title ="K">N2 </span> != <span title ="#Int"> 0 </span> </span>)&& (<span><span title ="K">RV </span> == <span title ="K">N1 </span> + <span title ="K">RV </span> </span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>SetRelAlarm ( <span title ="K">I </span> , <span title ="K">N1 </span> , <span title ="K">N2 </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N1 </span> + (<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cycleTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N2 </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cyclicity</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="#Bool"> false </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
</div>  when (<span><span title ="K">N2 </span> == <span title ="#Int"> 0 </span> </span>)&& (<span>\(\) <span title ="K">RV </span> \(\leq\) <span title ="K">N1 </span> + <span title ="K">RV </span> \(\)</span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>SetRelAlarm ( <span title ="K">I </span> , <span title ="K">N1 </span> , <span title ="K">N2 </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N1 </span> + (<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cycleTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N2 </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cyclicity</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="#Bool"> false </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Set">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( alarmed , <span title ="Set">S </span> ) </em> </td> </tr> </table></div> </div> </div>
</div>  when (<span><span title ="K">N2 </span> == <span title ="#Int"> 0 </span> </span>)&& (<span><span title ="K">RV </span> == <span title ="K">N1 </span> + <span title ="K">RV </span> </span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 API:       SetAbsAlarm(AlarmID, start, cycle) \\
       Parameter: AlarmID, start (Absolute value in counter), cycle (Cycle value in case of cyclic alarm. In case of single alarms, cycle shall be zero)\\
       Result:    The system service occupies the alarm<AlarmID> element. \\
       Condition: The alarm<AlarmID> must not already be in use.</div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>SetAbsAlarm ( <span title ="K">I </span> , <span title ="K">N3 </span> , <span title ="K">N2 </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N3 </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cycleTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N2 </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cyclicity</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="#Bool"> true </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
</div>  when (<span><span title ="K">N2 </span> != <span title ="#Int"> 0 </span> </span>)&& (<span>\(\) <span title ="K">RV </span> \(\leq\) <span title ="K">N3 </span> \(\)</span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>SetAbsAlarm ( <span title ="K">I </span> , <span title ="K">N3 </span> , <span title ="K">N2 </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N3 </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cycleTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N2 </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cyclicity</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="#Bool"> true </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Set">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( alarmed , <span title ="Set">S </span> ) </em> </td> </tr> </table></div> </div> </div>
</div>  when (<span><span title ="K">N2 </span> != <span title ="#Int"> 0 </span> </span>)&& (<span><span title ="K">RV </span> == <span title ="K">N3 </span> </span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>SetAbsAlarm ( <span title ="K">I </span> , <span title ="K">N3 </span> , <span title ="K">N2 </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N3 </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cycleTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N2 </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cyclicity</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
</div>  when (<span><span title ="K">N2 </span> == <span title ="#Int"> 0 </span> </span>)&& (<span>\(\) <span title ="K">RV </span> \(\leq\) <span title ="K">N3 </span> \(\)</span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>SetAbsAlarm ( <span title ="K">I </span> , <span title ="K">N3 </span> , <span title ="K">N2 </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N3 </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cycleTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N2 </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cyclicity</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="#Bool"> false </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Set">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( alarmed , <span title ="Set">S </span> ) </em> </td> </tr> </table></div> </div> </div>
</div>  when (<span><span title ="K">N2 </span> == <span title ="#Int"> 0 </span> </span>)&& (<span><span title ="K">RV </span> == <span title ="K">N3 </span> </span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> List </span></td><td> ::= </td> <td>remove ( <span class ="italic"> K </span>, <span class ="italic"> List </span>)  [ <span class ="attribute"> function</span> ]</td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>remove ( <span title ="K">I </span> , ListItem ( <span title ="K">I </span> ) <span title ="K">L </span> ) </em></td></tr> <tr class='rewriteRight'> <td><em>remove ( <span title ="K">I </span> , <span title ="K">L </span> ) </em> </td> </tr> </table></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>remove ( <span title ="K">I </span> , ListItem ( <span title ="K">I' </span> ) <span title ="K">L </span> ) </em></td></tr> <tr class='rewriteRight'> <td><em>(<span>ListItem ( <span title ="K">I' </span> ) remove ( <span title ="K">I </span> , <span title ="K">L </span> ) </span>)</em> </td> </tr> </table></div>  when \(\) <span title ="K">I </span> \(\mathrel{\neq_K}\) <span title ="K">I' </span> \(\)</div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>remove ( <span title ="K">I </span> , &bull;) </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
 This rule is about cancelling an alarm. We didn't find the exact describtion of API CancelAlarm ()in OESK specification. Therefore, there can be two understandings about CancelAlarm. One is to delete the relation between alarm and its corresponding counter. In this case, this alarm cannot be used again as users have no access to specify a counter to an alarm. Another understanding, which we think is more reasonable is setting the value of alarmTime and cycleTime to an unreachable number, such as MAV+1. Thus, users can set this alarm again by some APIs such as SetRelAlarm() and SetAbsAlarm(). </div><div><br /></div>
<div class="commentBlock moduleComment tex2jax_ignore">
 API:       CancelAlarm(AlarmID) \\
       Parameter: AlarmID\\
       Result:    The value of alarmTime and cycleTime are set to MAV+1. \\
       Condition: The alarm<AlarmID> must already be in use.</div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>CancelAlarm ( <span title ="K">I </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cycleTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cAlarm</span> </div><br /><div class="block defaultColor" style="min-width:4.2em"> <div class="center"><span title ="K">L </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
</div>  when (<span><span title ="K">I </span> in <span title ="K">L </span> </span>)</div> <br />
<div class="commentBlock moduleComment tex2jax_ignore">
  API:       GetAlarm(AlarmID, CounterValue) \\
       Parameter: AlarmID, CounterValue\\
       Result:    CounterValue which represents the relative value in counter before alarm<AlarmID> expires . \\
       Condition: The alarm<AlarmID> must already be in use.</div><div><br /></div>
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>GetAlarm ( <span title ="K">I </span> , <span title ="K">N4 </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">RemainAlarmTime</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center">\(\) <table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">N4 </span> </em> </td> </tr> </table>\(\mapsto\) <span title ="K">N3 </span> - (<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)\(\)</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N3 </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cycleTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N2 </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cAlarm</span> </div><br /><div class="block defaultColor" style="min-width:4.2em"> <div class="center"><span title ="K">L </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
</div>  when (<span><span title ="K">I </span> in <span title ="K">L </span> </span>)&& (<span>\(\) <span title ="K">RV </span> \(\leq\) <span title ="K">N3 </span> \(\)</span>) [ <span class ="attribute"> transition</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>GetAlarm ( <span title ="K">I </span> , <span title ="K">N4 </span> ) ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">alarm</span> </div><br /><div class="block green" > <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">I </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">aSysCounter</span> </div><br /><div class="block defaultColor" style="min-width:7.7em"> <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">RemainAlarmTime</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span>\(\) <span title ="K">N4 </span> \(\mapsto\) <span title ="K">N3 </span> - (<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)\(\)</span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">alarmTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N3 </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cycleTime</span> </div><br /><div class="block defaultColor" style="min-width:6.3em"> <div class="center"><span title ="K">N2 </span> </div> </div> </div>
</div> </div> </div>
<br /><div class="cell"> <div class="tab curvedEdge blue"><span class = "bold">sysCounter</span> </div><br /><div class="block blue" style="min-width:7.0em"> <div class="center"><div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cid</span> </div><br /><div class="block defaultColor" > <div class="center"><span title ="K">C </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">cAlarm</span> </div><br /><div class="block defaultColor" style="min-width:4.2em"> <div class="center"><span title ="K">L </span> </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">currentValue</span> </div><br /><div class="block defaultColor" style="min-width:8.4em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">RV </span> </em></td></tr> <tr class='rewriteRight'> <td><em>(<span><span title ="K">RV </span> + <span title ="#Int"> 1 </span> </span>)% (<span><span title ="K">MAV </span> + <span title ="#Int"> 1 </span> </span>)</em> </td> </tr> </table></div> </div> </div>
<div class="cell"> <div class="tab curvedEdge defaultColor"><span class = "bold">maxAllowedValue</span> </div><br /><div class="block defaultColor" style="min-width:10.5em"> <div class="center"><span title ="K">MAV </span> </div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Set">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em>add ( alarmed , <span title ="Set">S </span> ) </em> </td> </tr> </table></div> </div> </div>
</div>  when (<span><span title ="K">I </span> in <span title ="K">L </span> </span>)&& (<span><span title ="K">RV </span> == <span title ="K">N3 </span> </span>) [ <span class ="attribute"> transition</span> ]</div> <br />
END MODULE </div>
<br />
<div>MODULE <span class="large">IMP-SEMANTICS</span> <br /> <br />
<table> <tr> <td> SYNTAX <span class ="italic"> KResult </span></td><td> ::= </td> <td><span class ="italic"> Int </span></td> </tr>
<tr> <td> </td> <td class = "textCentered"> |  </td> <td><span class ="italic"> Bool </span></td> </tr>
</table>
<br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>\(\) <span title ="Int">I1 </span> \(\leq\) <span title ="Int">I2 </span> \(\)</em></td></tr> <tr class='rewriteRight'> <td><em>\(\) <span title ="Int">I1 </span> \(\mathrel{\leq_{\scriptstyle\it Int}}\) <span title ="Int">I2 </span> \(\)</em> </td> </tr> </table></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Int">I1 </span> == <span title ="Int">I2 </span> </em></td></tr> <tr class='rewriteRight'> <td><em>\(\) <span title ="Int">I1 </span> \(\mathrel{{=}{=}_{\scriptstyle\it Int}}\) <span title ="Int">I2 </span> \(\)</em> </td> </tr> </table></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Int">I1 </span> != <span title ="Int">I2 </span> </em></td></tr> <tr class='rewriteRight'> <td><em>\(\) <span title ="Int">I1 </span> \(\mathrel{{=}{/}{=}_{\scriptstyle\it Int}}\) <span title ="Int">I2 </span> \(\)</em> </td> </tr> </table></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>\(\) <span title ="Int">I1 </span> \(\leq\) <span title ="Int">I2 </span> \(\)</em></td></tr> <tr class='rewriteRight'> <td><em>\(\) <span title ="Int">I1 </span> \(\mathrel{<_{\scriptstyle\it Int}}\) <span title ="Int">I2 </span> \(\)</em> </td> </tr> </table></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Int">I1 </span> + <span title ="Int">I2 </span> </em></td></tr> <tr class='rewriteRight'> <td><em>\(\) <span title ="Int">I1 </span> \(\mathrel{+_{\scriptstyle\it Int}}\) <span title ="Int">I2 </span> \(\)</em> </td> </tr> </table></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Int">I1 </span> - <span title ="Int">I2 </span> </em></td></tr> <tr class='rewriteRight'> <td><em>\(\) <span title ="Int">I1 </span> \(\mathrel{-_{\scriptstyle\it Int}}\) <span title ="Int">I2 </span> \(\)</em> </td> </tr> </table></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Int">I1 </span> * <span title ="Int">I2 </span> </em></td></tr> <tr class='rewriteRight'> <td><em>\(\) <span title ="Int">I1 </span> \(\mathrel{\ast_{\scriptstyle\it Int}}\) <span title ="Int">I2 </span> \(\)</em> </td> </tr> </table></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Int">I1 </span> / <span title ="Int">I2 </span> </em></td></tr> <tr class='rewriteRight'> <td><em>\(\) <span title ="Int">I1 </span> \(\mathrel{\div_{\scriptstyle\it Int}}\) <span title ="Int">I2 </span> \(\)</em> </td> </tr> </table></div>  when \(\) <span title ="Int">I2 </span> \(\mathrel{{=}{/}{=}_{\scriptstyle\it Int}}\) <span title ="#Int"> 0 </span> \(\)</div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Int">I1 </span> % <span title ="Int">I2 </span> </em></td></tr> <tr class='rewriteRight'> <td><em>\(\) <span title ="Int">I1 </span> \(\mathrel{\%_{\scriptstyle\it Int}}\) <span title ="Int">I2 </span> \(\)</em> </td> </tr> </table></div>  when \(\) <span title ="Int">I2 </span> \(\mathrel{{=}{/}{=}_{\scriptstyle\it Int}}\) <span title ="#Int"> 0 </span> \(\)</div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>! <span title ="Bool">T </span> </em></td></tr> <tr class='rewriteRight'> <td><em>\(\neg_{\scriptstyle\it Bool}\) <span title ="Bool">T </span> \(\)</em> </td> </tr> </table></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="#Bool"> true </span> && <span title ="K">B </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">B </span> </em> </td> </tr> </table></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="#Bool"> false </span> && <span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="#Bool"> false </span> </em> </td> </tr> </table></div> </div> <br />
<div> <span > RULE </span><div class="cell"> <table class="rewrite"> <tr class='rewriteLeft'> <td> <em>if ( <span title ="K">B </span> ) <span title ="K">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em>if ( <span title ="K">B </span> ) <span title ="K">S </span> else { } </em> </td> </tr> </table></div>  [ <span class ="attribute"> macro</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">X </span> = <span title ="Int">I </span> ; </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab straightEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block left right defaultColor" > <div class="center">\(\) <span title ="K">X </span> \(\mapsto\) <table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="Int">I </span> </em> </td> </tr> </table>\(\)</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center">()</div> </div> </div>
</div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em><span title ="Id">X </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="Int">V </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center">()</div> </div> </div>
<div class="cell"> <div class="tab straightEdge defaultColor"><span class = "bold">env</span> </div><br /><div class="block left right defaultColor" > <div class="center">\(\) <span title ="Id">X </span> \(\mapsto\) <span title ="Int">V </span> \(\)</div> </div> </div>
</div>  [ <span class ="attribute"> lookup</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>if ( <span title ="#Bool"> true </span> ) <span title ="K">S </span> else <span title ="K">_ </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">S </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center">()</div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>if ( <span title ="#Bool"> false </span> ) <span title ="K">_ </span> else <span title ="K">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">S </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center">()</div> </div> </div>
</div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>while ( <span title ="K">B </span> ) <span title ="K">S </span> </em></td></tr> <tr class='rewriteRight'> <td><em>if ( <span title ="K">B </span> ) { <span title ="K">S </span> while ( <span title ="K">B </span> ) <span title ="K">S </span> } else { } </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center">()</div> </div> </div>
</div>  [ <span class ="attribute"> structural</span> ]</div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>{ } </em></td></tr> <tr class='rewriteRight'> <td><em>&bull;</em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center">()</div> </div> </div>
</div> </div> <br />
<div> <span > RULE </span><div class="cell"> <div class="cell"> <div class="tab curvedEdge cyan"><span class = "bold">task</span> </div><br /><div class="block right cyan" > <div class="center"><div class="cell"> <div class="tab curvedEdge red"><span class = "bold">state</span> </div><br /><div class="block red" > <div class="center">running </div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">k</span> </div><br /><div class="block right green" > <div class="center"><table class="rewrite"> <tr class='rewriteLeft'> <td> <em>{ <span title ="K">S </span> } </em></td></tr> <tr class='rewriteRight'> <td><em><span title ="K">S </span> </em> </td> </tr> </table></div> </div> </div>
</div> </div> </div>
<div class="cell"> <div class="tab curvedEdge green"><span class = "bold">signal</span> </div><br /><div class="block green" style="min-width:4.2em"> <div class="center">()</div> </div> </div>
</div> </div> <br />
END MODULE </div>
<br />
<div>MODULE <span class="large">OSEK</span> <br /> <br />
END MODULE </div>
<br />
</body>
</html>
